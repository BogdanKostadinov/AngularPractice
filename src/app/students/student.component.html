<div class="card">
  <div class="card-header">
  </div>
  <div class="card-body">
    <h5 class="card-title text-center">Create new student</h5>

    <form (ngSubmit)="save()" [formGroup]="studentForm">

      <div style="padding: 1rem;" class="form-group">
        <label style="margin-bottom: 10px;" for="firstName">First Name</label>
        <input class="form-control" formControlName="firstName" placeholder="Name (required)"
          [ngClass]="{'is-invalid': nameMessage }">
        <span class="invalid-feedback">
          {{nameMessage}}
        </span>
      </div>

      <div style="padding: 1rem;" class="form-group">
        <label style="margin-bottom: 10px;" for="surname">Surname</label>
        <input class="form-control" formControlName="surname" placeholder="Enter surname">
      </div>

      <div style="padding: 1rem;" class="form-group">
        <label style="margin-bottom: 10px;" for="age">Age</label>
        <input class="form-control" formControlName="age" placeholder="Enter your age">
      </div>

      <div style="margin-left: 1rem;" class="form-check form-check-inline">
        <input formControlName="myCheckbox" class="form-check-input" type="checkbox" id="inlineCheckbox1"
          value="option1">
        <label class="form-check-label" for="inlineCheckbox1">Add dynamically</label>
      </div>

      <div *ngIf="studentForm.get('myCheckbox')?.value">

        <div formArrayName="names" *ngFor="let name of names.controls; let i=index">
          <div [formGroupName]="i">
            <div style="padding: 1rem;" class="form-group">
              <label style="margin-bottom: 10px;" attr.for="{{'firstName' + i}}">First Name</label>
              <input class="form-control" formControlName="firstName" placeholder="Name (required)"
                [ngClass]="{'is-invalid': nameMessage }">
              <span class="invalid-feedback">
                {{nameMessage}}
              </span>
            </div>

            <div style="padding: 1rem;" class="form-group">
              <label style="margin-bottom: 10px;" for="surname">Surname</label>
              <input class="form-control" formControlName="surname" placeholder="Enter surname">
            </div>

            <div style="padding: 1rem;" class="form-group">
              <label style="margin-bottom: 10px;" for="age">Age</label>
              <input class="form-control" formControlName="age" placeholder="Enter your age">
            </div>
          </div>
        </div>
        <button style="margin-left: 1rem;" (click)="addDynamically()" class="btn btn-info">Add new</button>

      </div>

    </form>
    <button style="margin-top: 1rem; margin-left: 1rem;" type="submit" [disabled]="!studentForm.valid"
      class="btn btn-primary">
      Save
    </button>
    <button style="margin-top: 1rem; margin-left: 1rem;" (click)="populateTestData()" class="btn btn-secondary">
      Test Data
    </button>
  </div>
  <div class="card-footer text-muted">
    Dirty: {{studentForm.dirty}}<br>
    Touched: {{studentForm.touched}}<br>
    Valid: {{studentForm.valid}}<br>
    Value: {{studentForm.value | json}}<br>

  </div>
</div>